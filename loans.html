<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loans - Sri Mukkanneshwara Associate</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header>
        <h1>Sri Mukkanneshwara Associate</h1>
        <nav>
            <ul>
                <li><a href="index.html">Overview</a></li>
                <li><a href="members.html">Members</a></li>
                <li><a href="login.html">Accounts</a></li>
                <li><a href="meetings.html">Meetings</a></li>
                <li><a href="rules.html">Rules</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="loans-section">
            <div class="top-nav-bar">
                <a href="deposits.html" class="nav-button">
                    <i class="fas fa-arrow-left nav-arrow"></i>
                    <i class="fas fa-piggy-bank nav-icon"></i>
                    <span class="nav-text">View Deposits</span>
                </a>
                <h2><i class="fas fa-hand-holding-usd"></i> Loan Lists</h2>
            </div>

            <!-- Note Section (add after the summary card and before the loan lists) -->
            <div class="info-card note-card">
                <div class="important-note">
                    <i class="fas fa-info-circle"></i>
                    <p>Note: All records and calculations shown are up to the Annual Meeting (December 2024). Updates will be made after the meeting.</p>
                </div>
            </div>

            <!-- New Summary Section -->
            <div class="info-card summary-card">
                <h3>Loan Summary 2025-26</h3>
                <div class="summary-grid">
                    <div class="summary-item">
                        <span class="summary-label">Total Active Loans</span>
                        <span class="summary-value">₹6,20,000</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Number of Members with Active Loans</span>
                        <span class="summary-value">4</span>
                    </div>
                </div>
            </div>

            <!-- New Reminder Section -->
            <div class="info-card reminder-section">
                <h3><i class="fas fa-bell"></i> Loan Renewals Due This Month</h3>
                <div id="currentReminders">
                    <!-- If no renewals are due -->
                    <p class="no-reminders" style="display: none;">No loan renewals due this month.</p>
                    
                    <!-- Reminder table -->
                    <table class="member-table">
                        <thead>
                            <tr>
                                <th>Loan ID</th>
                                <th>Member Name</th>
                                <th>Phone Number</th>
                                <th>Loan Amount (₹)</th>
                                <th>Due Date</th>
                                <th>Contact</th>
                            </tr>
                        </thead>
                        <tbody id="reminderTableBody">
                            <!-- Rows will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="info-card">
                <h3>Loan List 2024-25</h3>
                <table class="member-table">
                    <thead>
                        <tr>
                            <th>Loan ID</th>
                            <th>Loan Taken by</th>
                            <th>From</th>
                            <th>Amount (₹)</th>
                            <th>Interest (₹)</th>
                            <th>Renewal Month</th>
                            <th>Status</th>
                            <th>Total Amount Paid (₹)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="loan-id">SMA-24-001</span></td>
                            <td>Santosh</td>
                            <td>Apr-24</td>
                            <td>30,000</td>
                            <td>450</td>
                            <td>May-24</td>
                            <td><span class="status-clear">Clear</span></td>
                            <td>450</td>
                        </tr>
                        <tr>
                            <td><span class="loan-id">SMA-24-002</span></td>
                            <td>Pratap</td>
                            <td>Apr-24</td>
                            <td>1,40,000</td>
                            <td>2,100</td>
                            <td>Jun-25</td>
                            <td><span class="status-active">Active</span></td>
                            <td>14,700</td>
                        </tr>
                        <tr>
                            <td><span class="loan-id">SMA-24-003</span></td>
                            <td>Manjunath</td>
                            <td>Apr-24</td>
                            <td>1,00,000</td>
                            <td>1,500</td>
                            <td>Dec-24</td>
                            <td><span class="status-active">Active</span></td>
                            <td>10,500</td>
                        </tr>
                        <tr>
                            <td><span class="loan-id">SMA-24-004</span></td>
                            <td>Pratap</td>
                            <td>Apr-24</td>
                            <td>50,000</td>
                            <td>750</td>
                            <td>Dec-24</td>
                            <td><span class="status-active">Active</span></td>
                            <td>5,250</td>
                        </tr>
                        <tr>
                            <td><span class="loan-id">SMA-24-005</span></td>
                            <td>Pradeep</td>
                            <td>Apr-24</td>
                            <td>1,00,000</td>
                            <td>1,500</td>
                            <td>Mar-25</td>
                            <td><span class="status-active">Active</span></td>
                            <td>10,500</td>
                        </tr>
                        <tr>
                            <td><span class="loan-id">SMA-24-006</span></td>
                            <td>Santosh</td>
                            <td>Apr-24</td>
                            <td>1,00,000</td>
                            <td>1,500</td>
                            <td>Apr-25</td>
                            <td><span class="status-active">Active</span></td>
                            <td>10,500</td>
                        </tr>
                        <tr>
                            <td><span class="loan-id">SMA-24-007</span></td>
                            <td>Pratap</td>
                            <td>May-24</td>
                            <td>60,000</td>
                            <td>900</td>
                            <td>May-25</td>
                            <td><span class="status-active">Active</span></td>
                            <td>5,400</td>
                        </tr>
                        <tr>
                            <td><span class="loan-id">SMA-24-008</span></td>
                            <td>Pradeep</td>
                            <td>Nov-24</td>
                            <td>1,00,000</td>
                            <td>1,500</td>
                            <td>Nov-25</td>
                            <td><span class="status-active">Active</span></td>
                            <td>-</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr class="total-row">
                            <td colspan="7"><strong>Total Interest Collected upto November 2024</strong></td>
                            <td><strong>57,300</strong></td>
                        </tr>
                    </tfoot>
                </table>
            </div>

            <div class="info-card mt-4">
                <h3>Loan List 2025-26</h3>
                <table class="member-table">
                    <thead>
                        <tr>
                            <th>Loan ID</th>
                            <th>Loan Taken by</th>
                            <th>From</th>
                            <th>Amount (₹)</th>
                            <th>Interest (₹)</th>
                            <th>Renewal Month</th>
                            <th>Status</th>
                            <th>Total Amount Paid (₹)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="loan-id">SMA-24-003</span></td>
                            <td>Manjunath</td>
                            <td>Dec-24</td>
                            <td>1,00,000</td>
                            <td>1,500</td>
                            <td>Dec-24</td>
                            <td><span class="status-clear">Clear</span></td>
                            <td>1,500</td>
                        </tr>
                        <tr>
                            <td><span class="loan-id">SMA-24-002</span></td>
                            <td>Pratap</td>
                            <td>Dec-24</td>
                            <td>1,40,000</td>
                            <td>2,100</td>
                            <td>Jun-25</td>
                            <td><span class="status-active">Active</span></td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><span class="loan-id">SMA-24-004</span></td>
                            <td>Pratap</td>
                            <td>Dec-24</td>
                            <td>50,000</td>
                            <td>750</td>
                            <td>Dec-24</td>
                            <td><span class="status-active">Active</span></td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><span class="loan-id">SMA-24-005</span></td>
                            <td>Pradeep</td>
                            <td>Dec-24</td>
                            <td>1,00,000</td>
                            <td>1,500</td>
                            <td>Mar-25</td>
                            <td><span class="status-active">Active</span></td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><span class="loan-id">SMA-24-006</span></td>
                            <td>Santosh</td>
                            <td>Dec-24</td>
                            <td>1,00,000</td>
                            <td>1,500</td>
                            <td>Apr-25</td>
                            <td><span class="status-active">Active</span></td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><span class="loan-id">SMA-24-007</span></td>
                            <td>Pratap</td>
                            <td>Dec-24</td>
                            <td>60,000</td>
                            <td>900</td>
                            <td>May-25</td>
                            <td><span class="status-active">Active</span></td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><span class="loan-id">SMA-24-008</span></td>
                            <td>Pradeep</td>
                            <td>Nov-24</td>
                            <td>1,00,000</td>
                            <td>1,500</td>
                            <td>Nov-25</td>
                            <td><span class="status-active">Active</span></td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><span class="loan-id">SMA-25-001</span></td>
                            <td>Sarpabhushana</td>
                            <td>Dec-24</td>
                            <td>30,000</td>
                            <td>450</td>
                            <td>Dec-25</td>
                            <td><span class="status-active">Active</span></td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><span class="loan-id">SMA-25-002</span></td>
                            <td>Santosh</td>
                            <td>Dec-24</td>
                            <td>40,000</td>
                            <td>600</td>
                            <td>Dec-25</td>
                            <td><span class="status-active">Active</span></td>
                            <td>-</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr class="total-row">
                            <td colspan="7"><strong>Total Interest Collected</strong></td>
                            <td><strong>1,500</strong></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Sri Mukkanneshwara Associate. All rights reserved.</p>
    </footer>

    <!-- Add this script at the bottom of your page, before </body> -->
    <script>
        // Function to check current month's renewals
        function checkRenewals() {
            const currentMonth = new Date().toLocaleString('default', { month: 'short' });
            const tbody = document.getElementById('reminderTableBody');
            const noReminders = document.querySelector('.no-reminders');
            let hasRenewals = false;

            // Clear existing rows
            tbody.innerHTML = '';

            // Get all loan rows from the 2025-26 table
            const loanRows = document.querySelectorAll('.member-table tbody tr');
            
            loanRows.forEach(row => {
                const renewalMonth = row.querySelector('td:nth-child(6)').textContent.split('-')[0];
                
                if (renewalMonth === currentMonth) {
                    hasRenewals = true;
                    const loanId = row.querySelector('td:nth-child(1)').textContent;
                    const memberName = row.querySelector('td:nth-child(2)').textContent;
                    const amount = row.querySelector('td:nth-child(4)').textContent;
                    const dueDate = row.querySelector('td:nth-child(6)').textContent;
                    
                    // Create reminder row
                    const reminderRow = document.createElement('tr');
                    reminderRow.innerHTML = `
                        <td>${loanId}</td>
                        <td>${memberName}</td>
                        <td>Contact Admin</td>
                        <td>${amount}</td>
                        <td>${dueDate}</td>
                        <td>
                            <button class="contact-btn" onclick="alert('Please contact the admin for member\'s contact information.')">
                                <i class="fas fa-phone"></i> Contact
                            </button>
                        </td>
                    `;
                    tbody.appendChild(reminderRow);
                }
            });

            // Show/hide "no reminders" message
            noReminders.style.display = hasRenewals ? 'none' : 'block';
            
            // Show/hide the entire reminder section
            document.querySelector('.reminder-section').style.display = hasRenewals ? 'block' : 'none';
        }

        // Run when page loads
        window.onload = checkRenewals;
    </script>
</body>
</html>